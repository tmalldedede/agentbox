@import 'tailwindcss';
@import 'tw-animate-css';
@import './theme.css';

@custom-variant dark (&:is(.dark *));

@layer base {
  * {
    @apply border-border outline-ring/50;
    scrollbar-width: thin;
    scrollbar-color: var(--border) transparent;
  }
  html {
    @apply overflow-x-hidden;
  }
  body {
    @apply min-h-svh w-full bg-background text-foreground has-[div[data-variant='inset']]:bg-sidebar;
  }

  /* Override Radix scroll locking for sticky headers */
  body[data-scroll-locked] {
    overflow: unset !important;
  }

  /* Cursor pointer for buttons */
  button:not(:disabled),
  [role='button']:not(:disabled) {
    cursor: pointer;
  }

  /* Prevent focus zoom on mobile devices */
  @media screen and (max-width: 767px) {
    input,
    select,
    textarea {
      font-size: 16px !important;
    }
  }
}

@utility container {
  margin-inline: auto;
  padding-inline: 2rem;
}

@utility no-scrollbar {
  /* Hide scrollbar for Chrome, Safari and Opera */
  &::-webkit-scrollbar {
    display: none;
  }
  /* Hide scrollbar for IE, Edge and Firefox */
  -ms-overflow-style: none; /* IE and Edge */
  scrollbar-width: none; /* Firefox */
}

@utility faded-bottom {
  @apply after:pointer-events-none after:absolute after:start-0 after:bottom-0 after:hidden after:h-32 after:w-full after:rounded-b-2xl after:bg-[linear-gradient(180deg,transparent_10%,var(--background)_70%)] md:after:block;
}

/* styles.css */
.CollapsibleContent {
  overflow: hidden;
}
.CollapsibleContent[data-state='open'] {
  animation: slideDown 300ms ease-out;
}
.CollapsibleContent[data-state='closed'] {
  animation: slideUp 300ms ease-out;
}

@keyframes slideDown {
  from {
    height: 0;
  }
  to {
    height: var(--radix-collapsible-content-height);
  }
}

@keyframes slideUp {
  from {
    height: var(--radix-collapsible-content-height);
  }
  to {
    height: 0;
  }
}

/* AgentBox Custom Styles */
@layer components {
  /* Button styles */
  .btn {
    @apply inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50;
    @apply px-4 py-2;
  }

  .btn-primary {
    @apply bg-primary text-primary-foreground hover:bg-primary/90;
  }

  .btn-secondary {
    @apply bg-secondary text-secondary-foreground hover:bg-secondary/80;
  }

  .btn-ghost {
    @apply hover:bg-accent hover:text-accent-foreground;
  }

  .btn-icon {
    @apply h-10 w-10 p-0;
  }

  .btn-sm {
    @apply h-8 px-3 text-xs;
  }

  .btn-lg {
    @apply h-12 px-8 text-base;
  }

  /* Card styles */
  .card {
    @apply rounded-lg border bg-card text-card-foreground shadow-sm;
  }

  /* Input styles */
  .input {
    @apply flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50;
  }

  /* Label styles */
  .label {
    @apply text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70;
  }

  /* Modal/Dialog styles */
  .modal-overlay {
    @apply fixed inset-0 z-50 bg-black/50;
  }

  .modal-content {
    @apply fixed left-1/2 top-1/2 z-50 -translate-x-1/2 -translate-y-1/2 rounded-lg border bg-background p-6 shadow-lg;
  }

  /* Badge styles */
  .badge {
    @apply inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors;
  }

  .badge-primary {
    @apply border-transparent bg-primary text-primary-foreground;
  }

  .badge-secondary {
    @apply border-transparent bg-secondary text-secondary-foreground;
  }

  /* Text color utilities - high contrast */
  .text-primary {
    @apply text-foreground;
  }

  .text-secondary {
    @apply text-foreground/90;
  }

  .text-muted {
    @apply text-foreground/70;
  }

  /* Fix tag text visibility */
  .bg-secondary.text-secondary {
    @apply text-foreground/80;
  }

  /* Border utilities */
  .border-default {
    @apply border-border;
  }

  /* Modal styles */
  .modal-backdrop {
    @apply fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm;
  }

  .modal {
    @apply w-full max-w-lg rounded-xl border bg-background p-0 shadow-xl;
    max-height: 90vh;
    overflow-y: auto;
  }

  .modal-header {
    @apply border-b p-4;
  }

  .modal-body {
    @apply p-4;
  }

  .modal-footer {
    @apply border-t p-4;
  }

  /* Agent avatar */
  .agent-avatar {
    @apply w-10 h-10 rounded-lg flex items-center justify-center text-sm font-bold;
  }

  /* Select dropdown */
  select.input {
    @apply appearance-none bg-background;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12' fill='none' stroke='%236b7280' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M3 4.5L6 7.5L9 4.5'/%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: right 12px center;
    padding-right: 36px;
  }

  /* Streaming animation */
  @keyframes shimmer {
    0% {
      transform: translateX(-100%);
    }
    100% {
      transform: translateX(100%);
    }
  }

  .animate-shimmer {
    animation: shimmer 2s infinite;
  }

  /* Custom scrollbar styles for chat */
  [data-slot='scroll-area-scrollbar'] {
    opacity: 0;
    transition: opacity 0.2s;
  }

  [data-slot='scroll-area']:hover [data-slot='scroll-area-scrollbar'],
  [data-slot='scroll-area'][data-state='visible'] [data-slot='scroll-area-scrollbar'] {
    opacity: 1;
  }

  [data-slot='scroll-area-thumb'] {
    min-height: 20px;
  }
}

/* CSS Variables for old components */
:root {
  --border-color: hsl(var(--border));
  --bg-card: hsl(var(--card));
  --text-primary: hsl(var(--foreground));
  --text-secondary: hsl(var(--muted-foreground));
}
